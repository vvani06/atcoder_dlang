# AHC022

RECRUIT 日本橋ハーフマラソン 2023夏（AtCoder Heuristic Contest 022）

問題文: https://atcoder.jp/contests/ahc022/tasks/ahc022_a

## 考えたこと

統計ゲーっぽい。

### スコア計算

空調は「差がなだらかであるほど良い」感じ。実際に計測する時も周囲何マスかの影響を受けるであろう（本当か？）からなだらかである方が良い。
ただ、出口セルが密集してる時は地獄っぽい。

## Diary

### 20230811

午前中からビールを飲んでいた。うまい。飲みながら問題文をチラ見。何もわからない・・

とりあえず統計ゲーっぽいことはわかり、ゲームの手順はこんな感じか。

- ヒートマップを作る
- ヒートマップ毎の「どこかに飛ばされる」ので、飛ばされた座標で温度を計測する
- それを繰り返して「どこか」の厳密な座標を当てる

ルールもスコア計算感じも HTTF2023予選（グラフォリアン）に類似している気がする。
こういうのはあまり得意ではないので、順位を伸ばしたいなら専門領域の勉強が必要だなー。

夜にテスターなどのセットアップだけ済ませて、実装に入れる状態を作ってこの日は終わり。

### 20230812

#### 初回提出まで

とりあえず何も考えずにそれっぽい実装をしたので提出してみる。 1.7M。
https://atcoder.jp/contests/ahc022/submissions/44472433

ヒートマップの作り方は全く工夫していないので、 seed=0 の時でも不正解率が8割くらいある。
構築コストもかなり高いので、小手先だけでも改善の余地は無限にあるのだろう・・

seed=0 でほぼ最大に近い密度なのでこのケースの正答率を上げていくのは良いベンチマークになりそうかなー。
seed=3 はかなり疎なので、正答率100% となっていた。この場合はコストを下げていくことが必要だ。

計測の前に移動ができる、というのはなかなか面白いなー。
近傍何マスかに特徴を持たせておくと有効に使えそうだが、ある程度推定できてないと難しそう。
密集した出口を見分ける際の材料として活用できたりするのだろうか。実装が重そう。

#### 提出2回目

問題文をよく読んだりしたところ、出口の近傍は計測値に直接的な影響を与えないとわかった。
つまり、なだらかなヒートマップにしても計測の精度には影響しないということ。

seed=0 の標準偏差は 36 と大きくない値なのだけど1割しか正答できていないので、
計測値から推測するのが下手くそすぎるという状態っぽい。

今は「計測値に最も近いやつを選んで、その頻度が最も高いやつを推定値とする」ってやってるけど、雑すぎる模様。
近いやつほど高スコア、みたいな感じにして100回のトータルが最も良いやつを選ぶ、とすると正答率が7割ほどになった。
もうちょいよくしたいけど、知識が低いので一旦ここまで。

ヒートマップをなだらかにすると設置コストの面では明らかに良くなるので、それはそれでやってみた。
ビジュアライザの地図がいい感じのグラデーションになった。

ここまでの実装を提出すると 14.5Mになった。いい感じ。
https://atcoder.jp/contests/ahc022/submissions/44474603

本日はABCもあるし、実装としてはこの辺で止めておいて考察を頑張るのが良いか。

標準偏差、36でも値が結構ばらつくのだな〜 無知すぎるだろう、という気もするがこういう問題と対面して体感できるというのがありがたい。
https://cattech-lab.com/science-tools/dist-normal/

seed=6 というか、標準偏差=900 付近はもうキツくて、実際の値が 1000 でも 0 が計測されることが余裕であり得る。
ここまでくると、設置時の値は 0 か 1000 みたいな極端な設定しか意味を為さない気がする。
そして、出口が密集してるところは諦めて疎になってる部分を優先してやらないとスコアが向上しないのではないかなー。
