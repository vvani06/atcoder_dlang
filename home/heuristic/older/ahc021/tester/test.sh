#!/bin/bash -e

ldmd2 -O -release ../src/a.d -of ./a
touch score
rm score
rm out/*
date && ./a < in/0000.txt > out/0000.txt 2>> score
date && ./a < in/0001.txt > out/0001.txt 2>> score
date && ./a < in/0002.txt > out/0002.txt 2>> score
date && ./a < in/0003.txt > out/0003.txt 2>> score
date && ./a < in/0004.txt > out/0004.txt 2>> score
date && ./a < in/0005.txt > out/0005.txt 2>> score
date && ./a < in/0006.txt > out/0006.txt 2>> score
date && ./a < in/0007.txt > out/0007.txt 2>> score
date && ./a < in/0008.txt > out/0008.txt 2>> score
date && ./a < in/0009.txt > out/0009.txt 2>> score
date && ./a < in/0010.txt > out/0010.txt 2>> score
date && ./a < in/0011.txt > out/0011.txt 2>> score
date && ./a < in/0012.txt > out/0012.txt 2>> score
date && ./a < in/0013.txt > out/0013.txt 2>> score
date && ./a < in/0014.txt > out/0014.txt 2>> score
date && ./a < in/0015.txt > out/0015.txt 2>> score
date && ./a < in/0016.txt > out/0016.txt 2>> score
date && ./a < in/0017.txt > out/0017.txt 2>> score
date && ./a < in/0018.txt > out/0018.txt 2>> score
date && ./a < in/0019.txt > out/0019.txt 2>> score
date && ./a < in/0020.txt > out/0020.txt 2>> score
date && ./a < in/0021.txt > out/0021.txt 2>> score
date && ./a < in/0022.txt > out/0022.txt 2>> score
date && ./a < in/0023.txt > out/0023.txt 2>> score
date && ./a < in/0024.txt > out/0024.txt 2>> score
date && ./a < in/0025.txt > out/0025.txt 2>> score
date && ./a < in/0026.txt > out/0026.txt 2>> score
date && ./a < in/0027.txt > out/0027.txt 2>> score
date && ./a < in/0028.txt > out/0028.txt 2>> score
date && ./a < in/0029.txt > out/0029.txt 2>> score
date && ./a < in/0030.txt > out/0030.txt 2>> score
date && ./a < in/0031.txt > out/0031.txt 2>> score
date && ./a < in/0032.txt > out/0032.txt 2>> score
date && ./a < in/0033.txt > out/0033.txt 2>> score
date && ./a < in/0034.txt > out/0034.txt 2>> score
date && ./a < in/0035.txt > out/0035.txt 2>> score
date && ./a < in/0036.txt > out/0036.txt 2>> score
date && ./a < in/0037.txt > out/0037.txt 2>> score
date && ./a < in/0038.txt > out/0038.txt 2>> score
date && ./a < in/0039.txt > out/0039.txt 2>> score
date && ./a < in/0040.txt > out/0040.txt 2>> score
date && ./a < in/0041.txt > out/0041.txt 2>> score
date && ./a < in/0042.txt > out/0042.txt 2>> score
date && ./a < in/0043.txt > out/0043.txt 2>> score
date && ./a < in/0044.txt > out/0044.txt 2>> score
date && ./a < in/0045.txt > out/0045.txt 2>> score
date && ./a < in/0046.txt > out/0046.txt 2>> score
date && ./a < in/0047.txt > out/0047.txt 2>> score
date && ./a < in/0048.txt > out/0048.txt 2>> score
date && ./a < in/0049.txt > out/0049.txt 2>> score
date && ./a < in/0050.txt > out/0050.txt 2>> score
date && ./a < in/0051.txt > out/0051.txt 2>> score
date && ./a < in/0052.txt > out/0052.txt 2>> score
date && ./a < in/0053.txt > out/0053.txt 2>> score
date && ./a < in/0054.txt > out/0054.txt 2>> score
date && ./a < in/0055.txt > out/0055.txt 2>> score
date && ./a < in/0056.txt > out/0056.txt 2>> score
date && ./a < in/0057.txt > out/0057.txt 2>> score
date && ./a < in/0058.txt > out/0058.txt 2>> score
date && ./a < in/0059.txt > out/0059.txt 2>> score
date && ./a < in/0060.txt > out/0060.txt 2>> score
date && ./a < in/0061.txt > out/0061.txt 2>> score
date && ./a < in/0062.txt > out/0062.txt 2>> score
date && ./a < in/0063.txt > out/0063.txt 2>> score
date && ./a < in/0064.txt > out/0064.txt 2>> score
date && ./a < in/0065.txt > out/0065.txt 2>> score
date && ./a < in/0066.txt > out/0066.txt 2>> score
date && ./a < in/0067.txt > out/0067.txt 2>> score
date && ./a < in/0068.txt > out/0068.txt 2>> score
date && ./a < in/0069.txt > out/0069.txt 2>> score
date && ./a < in/0070.txt > out/0070.txt 2>> score
date && ./a < in/0071.txt > out/0071.txt 2>> score
date && ./a < in/0072.txt > out/0072.txt 2>> score
date && ./a < in/0073.txt > out/0073.txt 2>> score
date && ./a < in/0074.txt > out/0074.txt 2>> score
date && ./a < in/0075.txt > out/0075.txt 2>> score
date && ./a < in/0076.txt > out/0076.txt 2>> score
date && ./a < in/0077.txt > out/0077.txt 2>> score
date && ./a < in/0078.txt > out/0078.txt 2>> score
date && ./a < in/0079.txt > out/0079.txt 2>> score
date && ./a < in/0080.txt > out/0080.txt 2>> score
date && ./a < in/0081.txt > out/0081.txt 2>> score
date && ./a < in/0082.txt > out/0082.txt 2>> score
date && ./a < in/0083.txt > out/0083.txt 2>> score
date && ./a < in/0084.txt > out/0084.txt 2>> score
date && ./a < in/0085.txt > out/0085.txt 2>> score
date && ./a < in/0086.txt > out/0086.txt 2>> score
date && ./a < in/0087.txt > out/0087.txt 2>> score
date && ./a < in/0088.txt > out/0088.txt 2>> score
date && ./a < in/0089.txt > out/0089.txt 2>> score
date && ./a < in/0090.txt > out/0090.txt 2>> score
date && ./a < in/0091.txt > out/0091.txt 2>> score
date && ./a < in/0092.txt > out/0092.txt 2>> score
date && ./a < in/0093.txt > out/0093.txt 2>> score
date && ./a < in/0094.txt > out/0094.txt 2>> score
date && ./a < in/0095.txt > out/0095.txt 2>> score
date && ./a < in/0096.txt > out/0096.txt 2>> score
date && ./a < in/0097.txt > out/0097.txt 2>> score
date && ./a < in/0098.txt > out/0098.txt 2>> score
date && ./a < in/0099.txt > out/0099.txt 2>> score
date && ./a < in/0100.txt > out/0100.txt 2>> score
date && ./a < in/0101.txt > out/0101.txt 2>> score
date && ./a < in/0102.txt > out/0102.txt 2>> score
date && ./a < in/0103.txt > out/0103.txt 2>> score
date && ./a < in/0104.txt > out/0104.txt 2>> score
date && ./a < in/0105.txt > out/0105.txt 2>> score
date && ./a < in/0106.txt > out/0106.txt 2>> score
date && ./a < in/0107.txt > out/0107.txt 2>> score
date && ./a < in/0108.txt > out/0108.txt 2>> score
date && ./a < in/0109.txt > out/0109.txt 2>> score
date && ./a < in/0110.txt > out/0110.txt 2>> score
date && ./a < in/0111.txt > out/0111.txt 2>> score
date && ./a < in/0112.txt > out/0112.txt 2>> score
date && ./a < in/0113.txt > out/0113.txt 2>> score
date && ./a < in/0114.txt > out/0114.txt 2>> score
date && ./a < in/0115.txt > out/0115.txt 2>> score
date && ./a < in/0116.txt > out/0116.txt 2>> score
date && ./a < in/0117.txt > out/0117.txt 2>> score
date && ./a < in/0118.txt > out/0118.txt 2>> score
date && ./a < in/0119.txt > out/0119.txt 2>> score
date && ./a < in/0120.txt > out/0120.txt 2>> score
date && ./a < in/0121.txt > out/0121.txt 2>> score
date && ./a < in/0122.txt > out/0122.txt 2>> score
date && ./a < in/0123.txt > out/0123.txt 2>> score
date && ./a < in/0124.txt > out/0124.txt 2>> score
date && ./a < in/0125.txt > out/0125.txt 2>> score
date && ./a < in/0126.txt > out/0126.txt 2>> score
date && ./a < in/0127.txt > out/0127.txt 2>> score
date && ./a < in/0128.txt > out/0128.txt 2>> score
date && ./a < in/0129.txt > out/0129.txt 2>> score
date && ./a < in/0130.txt > out/0130.txt 2>> score
date && ./a < in/0131.txt > out/0131.txt 2>> score
date && ./a < in/0132.txt > out/0132.txt 2>> score
date && ./a < in/0133.txt > out/0133.txt 2>> score
date && ./a < in/0134.txt > out/0134.txt 2>> score
date && ./a < in/0135.txt > out/0135.txt 2>> score
date && ./a < in/0136.txt > out/0136.txt 2>> score
date && ./a < in/0137.txt > out/0137.txt 2>> score
date && ./a < in/0138.txt > out/0138.txt 2>> score
date && ./a < in/0139.txt > out/0139.txt 2>> score
date && ./a < in/0140.txt > out/0140.txt 2>> score
date && ./a < in/0141.txt > out/0141.txt 2>> score
date && ./a < in/0142.txt > out/0142.txt 2>> score
date && ./a < in/0143.txt > out/0143.txt 2>> score
date && ./a < in/0144.txt > out/0144.txt 2>> score
date && ./a < in/0145.txt > out/0145.txt 2>> score
date && ./a < in/0146.txt > out/0146.txt 2>> score
date && ./a < in/0147.txt > out/0147.txt 2>> score
date && ./a < in/0148.txt > out/0148.txt 2>> score
date && ./a < in/0149.txt > out/0149.txt 2>> score

SCORE=`cat score | awk '{sum+=$3} END {printf "%d\n", sum}'`
echo $SCORE

DATE=`date "+%Y%m%d_%H%M%S"`
echo -e "${DATE}\t${SCORE}" >> score_history

cp score "logs/test_${DATE}"
